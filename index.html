<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Park It Here - Save Your Parking Location</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#4a90d9">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Park It Here">
    <link rel="apple-touch-icon" href="public/icons/icon-192x192.png">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5186931636428768"
        crossorigin="anonymous"></script>
    <!-- Leaflet CSS for OpenStreetMap (no API key required) -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
</head>
<body>
    <div class="container">
        <header>
            <h1>üöó Park It Here</h1>
            <p class="subtitle">Save parking photos locally ‚Äî no camera roll or cloud storage needed</p>
            <button type="button" id="help-btn" class="btn-help" aria-label="How to use">
                <span class="help-icon">?</span>
            </button>
        </header>

        <main>
            <!-- Elapsed Time Display (shown after photo capture) -->
            <section id="elapsed-time-section" class="card elapsed-time-card hidden">
                <h2>‚è±Ô∏è Time Since Parking</h2>
                <div class="elapsed-time-display">
                    <span id="elapsed-time" class="elapsed-time-value">00:00:00</span>
                </div>
                <p id="parked-at-time" class="parked-at-text"></p>
            </section>

            <!-- Saved Location Display -->
            <section id="saved-location" class="card hidden">
                <h2>Saved Parking Location</h2>
                <div id="location-display">
                    <div id="photo-preview-container">
                        <div class="photo-wrapper">
                            <img id="saved-photo" alt="Parking location photo" />
                            <button type="button" id="clear-btn" class="btn-remove-overlay" aria-label="Delete">‚úï</button>
                        </div>
                    </div>
                    <p id="location-coords" class="location-coords hidden"></p>
                    <div id="map-container" class="map-container hidden"></div>
                </div>
            </section>

            <!-- Input Form (Always visible) -->
            <section id="input-form" class="card">
                <h2>Take Parking Location Photo</h2>
                <div class="photo-actions">
                    <button type="button" id="camera-btn" class="btn btn-primary btn-photo-action">
                        üì∏ Take Photo
                    </button>
                </div>
                <!-- Hidden file input -->
                <input 
                    type="file" 
                    id="camera-input" 
                    accept="image/*"
                    capture="environment"
                    class="hidden-input"
                />
            </section>
        </main>

        <footer>
            <p class="privacy-notice">üîí Data is stored only on this device</p>
        </footer>
    </div>

    <!-- How to Use Modal -->
    <div id="help-modal" class="modal hidden">
        <div class="modal-overlay" id="modal-overlay"></div>
        <div class="modal-content">
            <button type="button" id="modal-close-btn" class="modal-close-btn" aria-label="Close">‚úï</button>
            <h2>üìñ How to Use</h2>
            <div class="help-content">
                <ol class="help-steps">
                    <li>
                        <strong>üì∏ Take a Photo</strong>
                        <p>Capture your parking location with your camera. The photo is saved directly in the browser, not in your camera roll.</p>
                    </li>
                    <li>
                        <strong>üìç Location Capture</strong>
                        <p>Allow location access to save GPS coordinates with your photo. A map will show your exact parking spot.</p>
                    </li>
                    <li>
                        <strong>üíæ Auto Save</strong>
                        <p>Your photo is automatically saved to your browser's local storage. It won't be uploaded to the cloud or saved to your camera roll.</p>
                    </li>
                    <li>
                        <strong>‚è±Ô∏è Track Elapsed Time</strong>
                        <p>See how long it's been since you parked with the live timer display.</p>
                    </li>
                    <li>
                        <strong>üó∫Ô∏è Map View</strong>
                        <p>If location was captured, see your parking spot on an interactive OpenStreetMap.</p>
                    </li>
                    <li>
                        <strong>üîç Zoom Photo</strong>
                        <p>Tap the photo to view it in full size.</p>
                    </li>
                    <li>
                        <strong>üóëÔ∏è Delete</strong>
                        <p>When you no longer need it, tap the ‚úï button on the photo to delete it.</p>
                    </li>
                    <li>
                        <strong>üïê Auto Cleanup</strong>
                        <p>Photos are automatically deleted after 24 hours to keep your storage clean.</p>
                    </li>
                </ol>
                
                <!-- Add to Home Screen Instructions -->
                <div class="install-guide-section">
                    <h3>üì≤ Add to Home Screen</h3>
                    <div class="install-instructions">
                        <details class="install-option">
                            <summary>üçé iPhone / iPad (iOS)</summary>
                            <ol>
                                <li>Tap the <strong>Share</strong> button (square with arrow) at the bottom of Safari</li>
                                <li>Scroll down and tap <strong>"Add to Home Screen"</strong></li>
                                <li>Tap <strong>"Add"</strong> in the top right corner</li>
                            </ol>
                        </details>
                        <details class="install-option">
                            <summary>ü§ñ Android</summary>
                            <ol>
                                <li>Tap the <strong>Menu</strong> button (three dots) in Chrome</li>
                                <li>Tap <strong>"Add to Home screen"</strong> or <strong>"Install app"</strong></li>
                                <li>Tap <strong>"Add"</strong> to confirm</li>
                            </ol>
                        </details>
                    </div>
                </div>
            </div>
            <div class="help-footer">
                <button type="button" id="help-close-btn" class="btn btn-primary">OK</button>
            </div>
        </div>
    </div>

    <!-- Photo Zoom Modal -->
    <div id="zoom-modal" class="modal zoom-modal hidden">
        <div class="modal-overlay" id="zoom-overlay"></div>
        <div class="zoom-content">
            <button type="button" id="zoom-close-btn" class="modal-close-btn" aria-label="Close">‚úï</button>
            <div class="zoom-image-container">
                <img id="zoom-image" alt="Enlarged parking location photo" />
            </div>
        </div>
    </div>

    <!-- Leaflet JS for OpenStreetMap (no API key required) -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script src="app.js"></script>
</body>
</html>
